<?php  

define('ROOT', __DIR__);
define('DS', DIRECTORY_SEPARATOR);
require('vendor/autoload.php');

/**
 * Contexte courant
 */

 $context = \Console\Context\Myfasi\App::class;


/**
 * Construction du conteneur d'injection de dÃ©pendances
 */
$containerBuilder = new \DI\ContainerBuilder();
$containerBuilder->useAutoWiring(true);
$containerBuilder->addDefinitions('config.php');

$containerBuilder->addDefinitions($context::CONFIG);

$container = $containerBuilder->build();

/**
 * Chargement de la configuration du contexte, qui correspond Ã  l'architecture utilisÃ©e
 * Ex: - myfasi et afia qui ont la meme architecture,
 *     - fasinet,
 *     - grafikart Framework, ...
 */

$commandContext = (new Console\Boot(
    $container,
    $container->get('app.context')
    )
)->getContext();

$commandContext->run();